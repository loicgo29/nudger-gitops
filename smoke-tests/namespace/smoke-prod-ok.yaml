apiVersion: v1
kind: Pod
metadata:
  name: smoke-ok-prod
  namespace: open4goods-prod
  labels: { app: smoke, env: prod }
spec:
  automountServiceAccountToken: false
  securityContext:
    runAsNonRoot: true
    runAsUser: 101
    runAsGroup: 101
    seccompProfile: { type: RuntimeDefault }
  containers:
    - name: web
      image: nginxinc/nginx-unprivileged:1.27-alpine
      ports: [ { containerPort: 8080 } ]
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: false  # volontairement simple pour Ã©viter les perms de volumes
        capabilities: { drop: ["ALL"] }
        runAsNonRoot: true
