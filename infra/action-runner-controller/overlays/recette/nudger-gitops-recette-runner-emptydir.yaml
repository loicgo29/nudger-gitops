apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: nudger-gitops-recette-runner-emptydir
  namespace: ns-open4goods-recette
spec:
  replicas: 1
  template:
    spec:
      repository: loicgo29/nudger-gitops
      image: ghcr.io/actions/actions-runner:2.311.0
      labels:
        - self-hosted
        - nudger-gitops
        - recette
      # Injection des credentials via le secret resealé
      envFrom:
        - secretRef:
            name: actions-runner-controller
      # Montage d'un volume éphémère pour le workdir
      volumes:
        - name: work
          emptyDir: {}
      volumeMounts:
        - name: work
          mountPath: /runner/_work
