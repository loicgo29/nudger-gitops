apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: nudger-gitops-recette-runner
  namespace: ns-open4goods-recette
spec:
  replicas: 1
  template:
    spec:
      repository: loicgo29/nudger-gitops
      image: ghcr.io/actions/actions-runner:2.311.0   # runner sans docker
      dockerdWithinRunnerContainer: false             # désactivé
      containerMode: kubernetes
      workVolumeClaimTemplate:        # SC 1 replica (longhorn-1r)
        storageClassName: longhorn-runner
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 10Gi
      labels:
        - self-hosted
        - nudger-gitops
        - recette
